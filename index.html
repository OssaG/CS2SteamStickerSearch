<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sticker Selector</title>
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <style>
        
        body {
            background-color: #121212;
            color: #e0e0e0;
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 10px;
            
        }

        select {
            width: 100%;
            padding: 10px;
            box-sizing: border-box;
            border: 1px solid #333;
            background-color: #1e1e1e;
            color: white;
        }

        button {
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            background-color: #444;
            color: #e0e0e0;
            cursor: pointer;
            margin-right: 10px;
            margin-top: 10px;
            font-size: 16px;
            font-weight: bold;
            text-align: center;
        }
.select2-search--dropdown, .select2-search__field{
    background-color: #1e1e1e;
    color: white;
}
.select2-container--default .select2-selection--single {
    background-color: #1e1e1e;
    color: white;
    border: 1px solid #333;
    border-radius: 4px;
}

.select2-container--default .select2-results__option {
    background-color: #1e1e1e;
    color: white;
}

.select2-container--default .select2-results__option--highlighted {
    background-color: #333;
    color: white;
}

.select2-container--default .select2-selection--single .select2-selection__arrow {
    top: 50%;
    transform: translateY(-50%);
    height: 16px;
}

.select2-container--default.select2-container--focus .select2-selection--single {
    border-color: #444;
}
.select2-container--default .select2-selection--single {
    background-color: #1e1e1e;
    color: white;
    border: 1px solid #333;
    border-radius: 4px;
}

.select2-container--default .select2-results__option {
    background-color: #1e1e1e;
    color: white;
}

.select2-container--default .select2-results__option--highlighted {
    background-color: #333;
    color: white;
}

.select2-container--default .select2-search--dropdown .select2-search__field {
    background-color: #1e1e1e;
    color: white;
    border: 1px solid #333;
    border-radius: 4px;
}

.select2-container--default .select2-search--dropdown .select2-search__field:focus {
    border-color: #444;
}

.select2-container--default .select2-results {
    background-color: #1e1e1e;
    border: 1px solid #333;
}

.select2-container--default .select2-selection--single .select2-selection__arrow {
    top: 50%;
    transform: translateY(-50%);
    height: 16px;
}

.select2-container--default.select2-container--focus .select2-selection--single {
    border-color: #444;
}
#select2-stickerSelector-container{
    color: white;
}
p{
    font-style: italic;
}
    </style>
</head>
<body>
    <nav>
       <a href="https://steamcommunity.com/tradeoffer/new/?partner=110466028&token=UpxZCOnD"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/83/Steam_icon_logo.svg/512px-Steam_icon_logo.svg.png" width="32" height="32" alt="Steam logo" /></a>
       <a href="https://github.com/ossag"><img src="https://github.com/fluidicon.png" width="32" height="32" alt="GitHub logo" /></a>
        <p>CS2 Steam Sticker Search</p>
   
    </nav>
    <p>Choose weapon</p>
    <select id="weaponSelector"> 
        <option value=""></option>
    </select>

    <p>Choose sticker</p>
    <select id="stickerSelector"></select>

    <button onclick="openSteamMarketUrl()">Search</button>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    <script>

        $(window).on("load", function() {
        $(document).ready(function() {
            // Initialize Select2 for stickerSelector
            $('#stickerSelector').select2({
                placeholder: 'Select a sticker',
                allowClear: true

            });

            // Populate weapon options
            const weapons = [
                { value: "tag_weapon_ak47", text: "AK-47" },
                { value: "tag_weapon_aug", text: "AUG" },
                { value: "tag_weapon_awp", text: "AWP" },
                { value: "tag_weapon_m4a4", text: "M4A4" },
                { value: "tag_weapon_m4a1", text: "M4A1" },
                { value: "tag_weapon_deagle", text: "Desert Eagle" },
                { value: "tag_weapon_p250", text: "P250" },
                { value: "tag_weapon_famas", text: "FAMAS" },
                { value: "tag_weapon_galil", text: "Galil AR" },
                { value: "tag_weapon_usp_silencer", text: "USP-S" },
                { value: "tag_weapon_p90", text: "P90" },
                { value: "tag_weapon_sg553", text: "SG553" },
                { value: "tag_weapon_mp5", text: "MP5" },
                { value: "tag_weapon_mac10", text: "MAC-10" },
                { value: "tag_weapon_nova", text: "Nova" },
                { value: "tag_weapon_sawedoff", text: "Sawed-Off" },
                { value: "tag_weapon_mag7", text: "MAG-7" },
                { value: "tag_weapon_bizon", text: "PP-Bizon" },
                { value: "tag_weapon_negev", text: "Negev" },
                { value: "tag_weapon_m249", text: "M249" },
                { value: "tag_weapon_scar20", text: "SCAR-20" },
                { value: "tag_weapon_g3sg1", text: "G3SG1" }
            ];

            const weaponSelector = $('#weaponSelector');
            weapons.forEach(weapon => {
                const option = $('<option></option>')
                    .val(weapon.value)
                    .text(weapon.text);
                weaponSelector.append(option);
            });

            // Fetch stickers and update the Select2 dropdown
            fetch('https://bymykel.github.io/CSGO-API/api/en/stickers.json')
                .then(response => response.json())
                .then(data => {
                    const stickers = data;
                    const stickerOptions = stickers.map(sticker => ({
                        id: sticker.name.substring(10),
                        text: sticker.name.substring(10)
                    }));

                    // Clear and populate stickerSelector with Select2
                    $('#stickerSelector').empty().select2({
                        data: stickerOptions,
                        placeholder: 'Select a sticker',
                        allowClear: true
                    });
                });

            // Search button functionality
            window.openSteamMarketUrl = function() {
                const selectedWeapon = $('#weaponSelector').val();
                const selectedSticker = $('#stickerSelector').val();
                let steamMarketUrl = `https://steamcommunity.com/market/search?q=%22${encodeURIComponent(selectedSticker.replace(/_/g, ' '))}%22&descriptions=1`;

                if (selectedWeapon) {
                    steamMarketUrl += `&category_730_Weapon%5B%5D=${selectedWeapon}`;
                }

                steamMarketUrl += `&category_730_ItemSet%5B%5D=any&category_730_Quality%5B%5D=#p1_price_asc`;

                window.open(steamMarketUrl, "_blank");
            };
        });
     
    });
    </script>
</body>
</html>
